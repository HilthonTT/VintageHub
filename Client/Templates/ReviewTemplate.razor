@inject IStringLocalizer<Resource> Localizer
@inject NavigationManager Navigation

<MudCard Outlined="true" Class="mb-3">
    <MudCardContent>
        <MudGrid>
            <MudItem xs="12">
                <MudText Typo="Typo.body1">
                    @Review.Title
                </MudText>
                <MudDivider Class="mt-3 mb-3"/>
                <MudText Typo="Typo.body2">
                    @Review.Description
                </MudText>
                <MudText Typo="Typo.subtitle1">
                    @Localizer["written-by"] 
                    @reviewerFullName
                </MudText>
            </MudItem>
            <MudItem xs="12">
                <MudRating SelectedValue="Review.Rating" ReadOnly="true" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
    <MudCardActions>
        <MudButton StartIcon="@Icons.Material.Filled.AdsClick" OnClick="LoadReviewPage">
            @Localizer["learn-more"]
        </MudButton>
    </MudCardActions>
</MudCard>

@code {
    [Parameter]
    [EditorRequired]
    public ReviewDisplayModel Review { get; set; }

    [Parameter]
    [EditorRequired]
    public ArtifactDisplayModel Artifact { get; set; }

    private string reviewerFullName = "";

    protected override void OnInitialized()
    {
        reviewerFullName = $"{Review.User?.FirstName} {Review.User?.LastName}";
    }

    private void LoadReviewPage()
    {
        Navigation.NavigateTo($"/Artifact/{Artifact.Id}/Review/{Review.Id}");
    }
}
